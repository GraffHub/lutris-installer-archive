{
  "id": 8739,
  "game_id": 951,
  "game_slug": "fallout-3-game-of-the-year-edition",
  "name": "Fallout 3: Game of the Year Edition",
  "year": 2009,
  "user": "djazz",
  "runner": "wine",
  "slug": "fallout-3-game-of-the-year-ed-gog",
  "version": "GOG",
  "description": "Includes Fallout Script Extender and some essential fixes",
  "notes": "Download the game from GOG (requires you to be logged in and owning the game): <a href=\"https://www.gog.com/downloads/fallout_3_game_of_the_year_edition_game/en1installer0\">Part 1 of 3</a> <a href=\"https://www.gog.com/downloads/fallout_3_game_of_the_year_edition_game/en1installer1\">Part 2 of 3</a> <a href=\"https://www.gog.com/downloads/fallout_3_game_of_the_year_edition_game/en1installer2\">Part 3 of 3</a>\r\n\r\n<b>Features of this installer</b>\r\n* Don't run the game in windowed mode, instead just change the resolution.\r\n* Some ini fixes for better performance.\r\n* Fakes a Nvidia GPU for Intel support (gpu autodetect doesn't work here)\r\n* Patches exe with 4GB/LAA support (if you want to play with HQ texture mods etc.)\r\n* Includes FOSE, NVAC, Fallout Stutter Remover, BOSS, Unofficial Fallout 3 Patch and a special launch menu.\r\n* Background image instead of the boring blue background of Wine!",
  "created_at": "2018-06-15T09:45:58.017000Z",
  "updated_at": "2019-02-11T20:50:36.432102Z",
  "draft": false,
  "published": true,
  "published_by": null,
  "rating": "3",
  "steamid": 22370,
  "gogid": 1454315831,
  "gogslug": "fallout_3_game_of_the_year_edition",
  "humblestoreid": "fallout-3-game-of-the-year-edition",
  "script": {
    "files": [
      {
        "setup": "N/A:Please select file setup_fallout_3_1.7.0.3_(12034).exe from GOG"
      },
      {
        "innoextract": "http://constexpr.org/innoextract/files/innoextract-1.7/innoextract-1.7-linux.tar.xz"
      },
      {
        "wallpaper": "https://gist.github.com/daniel-j/28c6d207c5393aa64c3a9d8ee26d1425/raw/wallpaper-fallout3.tar.xz"
      },
      {
        "laa-patcher": "https://gist.github.com/daniel-j/28c6d207c5393aa64c3a9d8ee26d1425/raw/laa-patcher.tar.xz"
      },
      {
        "launchmenu": "https://gist.github.com/daniel-j/8194c168cff79e57960eed7080e8516b/archive/master.tar.gz"
      },
      {
        "modpack": "https://djazz.se/nas/games/fallout3/modpack.tar.xz"
      }
    ],
    "wine": {
      "WineDesktop": "1280x720",
      "Desktop": true,
      "overrides": {
        "winegstreamer": "disabled"
      }
    },
    "game": {
      "prefix": "$GAMEDIR",
      "arch": "win64",
      "exe": "drive_c/Fallout 3/launch.bat"
    },
    "system": {
      "env": {
        "__GL_THREADED_OPTIMIZATIONS": "1",
        "__GL_SHADER_DISK_CACHE_PATH": "$GAMEDIR",
        "__GL_SHADER_DISK_CACHE": "1",
        "mesa_glthread": "true"
      }
    },
    "installer": [
      {
        "input_menu": {
          "options": [
            {
              "true": "Yes, store them in home"
            },
            {
              "false": "No, store them inside the wineprefix"
            }
          ],
          "description": "Do you want to store saves in ~/Documents/My Games/Fallout3/Saves ?",
          "preselect": "true",
          "id": "CONFIG_LOCATION"
        }
      },
      {
        "task": {
          "description": "Creating 64-bit Wine prefix",
          "name": "create_prefix",
          "arch": "win64",
          "prefix": "$GAMEDIR",
          "install_mono": false,
          "install_gecko": false
        }
      },
      {
        "task": {
          "description": "Disabling virtual desktop",
          "name": "set_regedit",
          "arch": "win64",
          "key": "WineDesktop",
          "prefix": "$GAMEDIR",
          "path": "HKEY_CURRENT_USER\\Software\\Wine\\Explorer\\Desktops",
          "value": ""
        }
      },
      {
        "task": {
          "description": "winetricks: winxp quartz",
          "name": "winetricks",
          "arch": "win64",
          "app": "winxp quartz",
          "prefix": "$GAMEDIR"
        }
      },
      {
        "extract": {
          "dst": "$GAMEDIR/drive_c",
          "file": "wallpaper"
        }
      },
      {
        "task": {
          "description": "Setting wallpaper",
          "name": "set_regedit",
          "arch": "win64",
          "key": "Background",
          "prefix": "$GAMEDIR",
          "path": "HKEY_CURRENT_USER\\Control Panel\\Colors",
          "value": "0 0 0"
        }
      },
      {
        "task": {
          "description": "Setting wallpaper",
          "name": "set_regedit",
          "arch": "win64",
          "key": "Wallpaper",
          "prefix": "$GAMEDIR",
          "path": "HKEY_CURRENT_USER\\Control Panel\\Desktop",
          "value": "c:\\\\wallpaper.bmp"
        }
      },
      {
        "task": {
          "description": "Enabling GrabFullscreen for Fallout3.exe",
          "name": "set_regedit",
          "arch": "win64",
          "key": "GrabFullscreen",
          "prefix": "$GAMEDIR",
          "path": "HKEY_CURRENT_USER\\Software\\Wine\\AppDefaults\\Fallout3.exe\\X11 Driver",
          "value": "Y"
        }
      },
      {
        "task": {
          "description": "Forcing Nvidia VideoPci",
          "path": "HKEY_CURRENT_USER\\Software\\Wine\\Direct3D",
          "key": "VideoPciDeviceID",
          "prefix": "$GAMEDIR",
          "name": "set_regedit",
          "arch": "win64",
          "type": "REG_DWORD",
          "value": "402"
        }
      },
      {
        "task": {
          "description": "Forcing Nvidia VideoPci",
          "path": "HKEY_CURRENT_USER\\Software\\Wine\\Direct3D",
          "key": "VideoPciVendorID",
          "prefix": "$GAMEDIR",
          "name": "set_regedit",
          "arch": "win64",
          "type": "REG_DWORD",
          "value": "10de"
        }
      },
      {
        "task": {
          "description": "Disabling AlwaysOffscreen",
          "name": "set_regedit",
          "arch": "win64",
          "key": "AlwaysOffscreen",
          "prefix": "$GAMEDIR",
          "path": "HKEY_CURRENT_USER\\Software\\Wine\\Direct3D",
          "value": "disabled"
        }
      },
      {
        "task": {
          "description": "Configuring console",
          "path": "HKEY_CURRENT_USER\\Console",
          "key": "ColorTable02",
          "prefix": "$GAMEDIR",
          "name": "set_regedit",
          "arch": "win64",
          "type": "REG_DWORD",
          "value": "202e0e"
        }
      },
      {
        "task": {
          "description": "Configuring console",
          "path": "HKEY_CURRENT_USER\\Console",
          "key": "ColorTable10",
          "prefix": "$GAMEDIR",
          "name": "set_regedit",
          "arch": "win64",
          "type": "REG_DWORD",
          "value": "74f014"
        }
      },
      {
        "task": {
          "description": "Configuring console",
          "name": "set_regedit",
          "arch": "win64",
          "key": "FaceName",
          "prefix": "$GAMEDIR",
          "path": "HKEY_CURRENT_USER\\Console",
          "value": "Fixedsys"
        }
      },
      {
        "task": {
          "description": "Configuring console",
          "path": "HKEY_CURRENT_USER\\Console",
          "key": "ScreenColors",
          "prefix": "$GAMEDIR",
          "name": "set_regedit",
          "arch": "win64",
          "type": "REG_DWORD",
          "value": "2a"
        }
      },
      {
        "task": {
          "description": "Configuring console",
          "path": "HKEY_CURRENT_USER\\Console",
          "key": "FontWeight",
          "prefix": "$GAMEDIR",
          "name": "set_regedit",
          "arch": "win64",
          "type": "REG_DWORD",
          "value": "0190"
        }
      },
      {
        "extract": {
          "dst": "$CACHE/innoextract",
          "file": "innoextract"
        }
      },
      {
        "execute": {
          "command": "mkdir -pv \"$GAMEDIR/drive_c/Fallout 3\" \"$CACHE/extract\"; ln -sv \"$GAMEDIR/drive_c/Fallout 3\" \"$CACHE/extract/app\""
        }
      },
      {
        "execute": {
          "args": "--gog --exclude-temp --output-dir \"$CACHE/extract\" \"$setup\"",
          "file": "$CACHE/innoextract/innoextract",
          "description": "Extracting game files"
        }
      },
      {
        "write_file": {
          "content": "REGEDIT4\n\n[HKEY_LOCAL_MACHINE\\Software\\Bethesda Softworks\\Fallout3]\n\"Installed Path\"=\"C:\\\\Fallout 3\\\\\"\n\n[HKEY_LOCAL_MACHINE\\Software\\Wow6432Node\\Bethesda Softworks\\Fallout3]\n\"Installed Path\"=\"C:\\\\Fallout 3\\\\\"\n",
          "file": "$CACHE/fallout3.reg"
        }
      },
      {
        "task": {
          "prefix": "$GAMEDIR",
          "name": "set_regedit_file",
          "arch": "win64",
          "filename": "$CACHE/fallout3.reg"
        }
      },
      {
        "write_config": {
          "key": "bUseThreadedAI",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "General",
          "value": 1
        }
      },
      {
        "write_config": {
          "key": "iNumHWThreads",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "General",
          "value": 2
        }
      },
      {
        "write_config": {
          "key": "bUseThreadedBlood",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "General",
          "value": 1
        }
      },
      {
        "write_config": {
          "key": "bUseThreadedMorpher",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "General",
          "value": 1
        }
      },
      {
        "write_config": {
          "key": "bUseThreadedTempEffects",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "General",
          "value": 1
        }
      },
      {
        "write_config": {
          "key": "bUseThreadedParticleSystem",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "General",
          "value": 1
        }
      },
      {
        "write_config": {
          "key": "bUseMultiThreadedFaceGen",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "General",
          "value": 1
        }
      },
      {
        "write_config": {
          "key": "bUseMultiThreadedTrees",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "General",
          "value": 1
        }
      },
      {
        "write_config": {
          "key": "iPreloadSizeLimit",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "General",
          "value": 104857600
        }
      },
      {
        "write_config": {
          "key": "fDefaultFOV",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Display",
          "value": 85
        }
      },
      {
        "write_config": {
          "key": "fDefaultWorldFOV",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Display",
          "value": 85
        }
      },
      {
        "write_config": {
          "key": "fDefault1stPersonFOV",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Display",
          "value": 65
        }
      },
      {
        "write_config": {
          "key": "fPipboy1stPersonFOV",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Display",
          "value": 50
        }
      },
      {
        "write_config": {
          "key": "iPresentInterval",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Display",
          "value": 0
        }
      },
      {
        "write_config": {
          "key": "bFull Screen",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Display",
          "value": 1
        }
      },
      {
        "write_config": {
          "key": "bMultiThreadAudio",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Audio",
          "value": 1
        }
      },
      {
        "write_config": {
          "key": "bEnableAudioCache",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Audio",
          "value": 1
        }
      },
      {
        "write_config": {
          "key": "iAudioCacheSize",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Audio",
          "value": 4096
        }
      },
      {
        "write_config": {
          "key": "iMaxSizeForCachedSound",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Audio",
          "value": 256
        }
      },
      {
        "write_config": {
          "key": "iRadioUpdateInterval",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Audio",
          "value": 1024
        }
      },
      {
        "write_config": {
          "key": "fForegroundMouseMult",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Controls",
          "value": 0
        }
      },
      {
        "write_config": {
          "key": "fForegroundMouseAccelBase",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Controls",
          "value": 0
        }
      },
      {
        "write_config": {
          "key": "fForegroundMouseAccelTop",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Controls",
          "value": 0
        }
      },
      {
        "write_config": {
          "key": "fForegroundMouseBase",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Controls",
          "value": 0
        }
      },
      {
        "write_config": {
          "key": "bBackground Mouse",
          "file": "$GAMEDIR/drive_c/Fallout 3/Fallout_default.ini",
          "section": "Controls",
          "value": 1
        }
      },
      {
        "extract": {
          "dst": "$GAMEDIR/drive_c/Fallout 3",
          "file": "modpack"
        }
      },
      {
        "extract": {
          "dst": "$GAMEDIR/drive_c/Fallout 3",
          "file": "launchmenu"
        }
      },
      {
        "extract": {
          "dst": "$CACHE/laa-patcher",
          "file": "laa-patcher",
          "description": "Patching Fallout3.exe with Large Address Aware support"
        }
      },
      {
        "task": {
          "working_dir": "$GAMEDIR/drive_c/Fallout 3",
          "description": "Patching Fallout3.exe with Large Address Aware support",
          "name": "wineexec",
          "arch": "win64",
          "executable": "$CACHE/laa-patcher/EDITBIN.EXE",
          "args": "/LARGEADDRESSAWARE Fallout3.exe",
          "prefix": "$GAMEDIR"
        }
      },
      {
        "task": {
          "description": "Sorting modlist with BOSS",
          "name": "wineexec",
          "arch": "win64",
          "executable": "$GAMEDIR/drive_c/Fallout 3/boss.exe",
          "args": "--update --silent --game Fallout3",
          "prefix": "$GAMEDIR"
        }
      },
      {
        "task": {
          "description": "Enabling virtual desktop",
          "name": "set_regedit",
          "arch": "win64",
          "key": "WineDesktop",
          "prefix": "$GAMEDIR",
          "path": "HKEY_CURRENT_USER\\Software\\Wine\\Explorer\\Desktops",
          "value": "1280x720"
        }
      },
      {
        "task": {
          "description": "Enabling virtual desktop",
          "name": "set_regedit",
          "arch": "win64",
          "key": "Desktop",
          "prefix": "$GAMEDIR",
          "path": "HKEY_CURRENT_USER\\Software\\Wine\\Explorer",
          "value": "WineDesktop"
        }
      },
      {
        "task": {
          "prefix": "$GAMEDIR",
          "name": "winekill"
        }
      },
      {
        "execute": {
          "command": "rm -f \"$GAMEDIR/drive_c/users/$USER/My Documents\"\nmkdir -pv \"$GAMEDIR/drive_c/users/$USER/My Documents/My Games/Fallout3\"\nrm -f \"$GAMEDIR/data\"; ln -svrT \"$GAMEDIR/drive_c/Fallout 3/Data\" \"$GAMEDIR/data\"\nrm -f \"$GAMEDIR/config\"; ln -svrT \"$GAMEDIR/drive_c/users/$USER/My Documents/My Games/Fallout3\" \"$GAMEDIR/config\"\nrm -f \"$GAMEDIR/drive_c/users/$USER/My Documents/My Games/Fallout3/Saves\"\n$INPUT_CONFIG_LOCATION && (mkdir -pv \"$HOME/Documents/My Games/Fallout3/Saves\" \"$GAMEDIR/drive_c/users/$USER/My Documents/My Games/Fallout3\"; ln -svT \"$HOME/Documents/My Games/Fallout3/Saves\" \"$GAMEDIR/drive_c/users/$USER/My Documents/My Games/Fallout3/Saves\")\n"
        }
      },
      {
        "task": {
          "description": "Configure data files (DLCs), video settings and exit the launcher.\nDon't forget to set your native resolution!\n",
          "name": "wineexec",
          "arch": "win64",
          "executable": "$GAMEDIR/drive_c/Fallout 3/FalloutLauncher.exe",
          "prefix": "$GAMEDIR",
          "exclude_processes": "Fallout3.exe",
          "env": {
            "WINEDEBUG": "-all"
          }
        }
      },
      {
        "task": {
          "prefix": "$GAMEDIR",
          "name": "winekill",
          "arch": "win64"
        }
      }
    ]
  },
  "content": "game:\r\n  exe: drive_c/Fallout 3/launch.bat\r\n  arch: win64\r\n  prefix: $GAMEDIR\r\nwine:\r\n  Desktop: true\r\n  WineDesktop: 1280x720\r\n  overrides:\r\n    winegstreamer: disabled\r\n\r\nsystem:\r\n  env:\r\n    __GL_THREADED_OPTIMIZATIONS: '1'\r\n    __GL_SHADER_DISK_CACHE: '1'\r\n    __GL_SHADER_DISK_CACHE_PATH: $GAMEDIR\r\n    mesa_glthread: 'true'\r\n\r\nfiles:\r\n- setup: 'N/A:Please select file setup_fallout_3_1.7.0.3_(12034).exe from GOG'\r\n- innoextract: http://constexpr.org/innoextract/files/innoextract-1.7/innoextract-1.7-linux.tar.xz\r\n- wallpaper: https://gist.github.com/daniel-j/28c6d207c5393aa64c3a9d8ee26d1425/raw/wallpaper-fallout3.tar.xz\r\n- laa-patcher: https://gist.github.com/daniel-j/28c6d207c5393aa64c3a9d8ee26d1425/raw/laa-patcher.tar.xz\r\n- launchmenu: https://gist.github.com/daniel-j/8194c168cff79e57960eed7080e8516b/archive/master.tar.gz\r\n- modpack: https://djazz.se/nas/games/fallout3/modpack.tar.xz\r\n\r\ninstaller:\r\n- input_menu:\r\n    id: CONFIG_LOCATION\r\n    description: \"Do you want to store saves in ~/Documents/My Games/Fallout3/Saves ?\"\r\n    options:\r\n    - 'true': 'Yes, store them in home'\r\n    - 'false': 'No, store them inside the wineprefix'\r\n    preselect: 'true'\r\n\r\n# Create Wine prefix\r\n- task:\r\n    name: create_prefix\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n    description: Creating 64-bit Wine prefix\r\n    install_gecko: False\r\n    install_mono: False\r\n\r\n- task:\r\n    name: set_regedit\r\n    description: 'Disabling virtual desktop'\r\n    path: 'HKEY_CURRENT_USER\\Software\\Wine\\Explorer\\Desktops'\r\n    key: WineDesktop\r\n    value: ''\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n\r\n- task:\r\n    name: winetricks\r\n    app: winxp quartz\r\n    description: 'winetricks: winxp quartz'\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n\r\n# Set a cool wallpaper\r\n- extract:\r\n    file: wallpaper\r\n    dst: $GAMEDIR/drive_c\r\n- task:\r\n    name: set_regedit\r\n    description: 'Setting wallpaper'\r\n    path: 'HKEY_CURRENT_USER\\Control Panel\\Colors'\r\n    key: Background\r\n    value: '0 0 0'\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n- task:\r\n    name: set_regedit\r\n    description: 'Setting wallpaper'\r\n    path: 'HKEY_CURRENT_USER\\Control Panel\\Desktop'\r\n    key: Wallpaper\r\n    value: 'c:\\\\wallpaper.bmp'\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n\r\n# Tweak Wine config\r\n- task:\r\n    name: set_regedit\r\n    description: 'Enabling GrabFullscreen for Fallout3.exe'\r\n    path: 'HKEY_CURRENT_USER\\Software\\Wine\\AppDefaults\\Fallout3.exe\\X11 Driver'\r\n    key: GrabFullscreen\r\n    value: 'Y'\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n- task:\r\n    name: set_regedit\r\n    description: 'Forcing Nvidia VideoPci'\r\n    path: 'HKEY_CURRENT_USER\\Software\\Wine\\Direct3D'\r\n    key: VideoPciDeviceID\r\n    value: '402'\r\n    type: 'REG_DWORD'\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n- task:\r\n    name: set_regedit\r\n    description: 'Forcing Nvidia VideoPci'\r\n    path: 'HKEY_CURRENT_USER\\Software\\Wine\\Direct3D'\r\n    key: VideoPciVendorID\r\n    value: '10de'\r\n    type: 'REG_DWORD'\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n- task:\r\n    name: set_regedit\r\n    description: 'Disabling AlwaysOffscreen'\r\n    path: 'HKEY_CURRENT_USER\\Software\\Wine\\Direct3D'\r\n    key: AlwaysOffscreen\r\n    value: 'disabled'\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n- task:\r\n    name: set_regedit\r\n    description: 'Configuring console'\r\n    path: 'HKEY_CURRENT_USER\\Console'\r\n    key: ColorTable02\r\n    type: REG_DWORD\r\n    value: '202e0e'\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n- task:\r\n    name: set_regedit\r\n    description: 'Configuring console'\r\n    path: 'HKEY_CURRENT_USER\\Console'\r\n    key: ColorTable10\r\n    type: REG_DWORD\r\n    value: '74f014'\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n- task:\r\n    name: set_regedit\r\n    description: 'Configuring console'\r\n    path: 'HKEY_CURRENT_USER\\Console'\r\n    key: FaceName\r\n    value: Fixedsys\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n- task:\r\n    name: set_regedit\r\n    description: 'Configuring console'\r\n    path: 'HKEY_CURRENT_USER\\Console'\r\n    key: ScreenColors\r\n    type: REG_DWORD\r\n    value: '2a'\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n- task:\r\n    name: set_regedit\r\n    description: 'Configuring console'\r\n    path: 'HKEY_CURRENT_USER\\Console'\r\n    key: FontWeight\r\n    type: REG_DWORD\r\n    value: '0190'\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n\r\n# Run innoextract on the GOG installer\r\n- extract:\r\n    file: innoextract\r\n    dst: $CACHE/innoextract\r\n- execute:\r\n    command: mkdir -pv \"$GAMEDIR/drive_c/Fallout 3\" \"$CACHE/extract\"; ln -sv \"$GAMEDIR/drive_c/Fallout 3\" \"$CACHE/extract/app\"\r\n- execute:\r\n    file: $CACHE/innoextract/innoextract\r\n    args: --gog --exclude-temp --output-dir \"$CACHE/extract\" \"$setup\"\r\n    description: 'Extracting game files'\r\n\r\n# Add registry entry so the launcher detects the game as installed\r\n- write_file:\r\n    content: |\r\n      REGEDIT4\r\n\r\n      [HKEY_LOCAL_MACHINE\\Software\\Bethesda Softworks\\Fallout3]\r\n      \"Installed Path\"=\"C:\\\\Fallout 3\\\\\"\r\n\r\n      [HKEY_LOCAL_MACHINE\\Software\\Wow6432Node\\Bethesda Softworks\\Fallout3]\r\n      \"Installed Path\"=\"C:\\\\Fallout 3\\\\\"\r\n    file: $CACHE/fallout3.reg\r\n- task:\r\n    name: set_regedit_file\r\n    filename: $CACHE/fallout3.reg\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n\r\n# Fixes to the default ini file. If you already have a FALLOUT.INI, delete it.\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: General\r\n    key: bUseThreadedAI\r\n    value: 1\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: General\r\n    key: iNumHWThreads\r\n    value: 2\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: General\r\n    key: bUseThreadedBlood\r\n    value: 1\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: General\r\n    key: bUseThreadedMorpher\r\n    value: 1\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: General\r\n    key: bUseThreadedTempEffects\r\n    value: 1\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: General\r\n    key: bUseThreadedParticleSystem\r\n    value: 1\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: General\r\n    key: bUseMultiThreadedFaceGen\r\n    value: 1\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: General\r\n    key: bUseMultiThreadedTrees\r\n    value: 1\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: General\r\n    key: iPreloadSizeLimit\r\n    value: 104857600\r\n\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Display\r\n    key: fDefaultFOV\r\n    value: 85\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Display\r\n    key: fDefaultWorldFOV\r\n    value: 85\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Display\r\n    key: fDefault1stPersonFOV\r\n    value: 65\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Display\r\n    key: fPipboy1stPersonFOV\r\n    value: 50\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Display\r\n    key: iPresentInterval\r\n    value: 0\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Display\r\n    key: bFull Screen\r\n    value: 1\r\n\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Audio\r\n    key: bMultiThreadAudio\r\n    value: 1\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Audio\r\n    key: bEnableAudioCache\r\n    value: 1\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Audio\r\n    key: iAudioCacheSize\r\n    value: 4096\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Audio\r\n    key: iMaxSizeForCachedSound\r\n    value: 256\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Audio\r\n    key: iRadioUpdateInterval\r\n    value: 1024\r\n\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Controls\r\n    key: fForegroundMouseMult\r\n    value: 0\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Controls\r\n    key: fForegroundMouseAccelBase\r\n    value: 0\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Controls\r\n    key: fForegroundMouseAccelTop\r\n    value: 0\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Controls\r\n    key: fForegroundMouseBase\r\n    value: 0\r\n- write_config:\r\n    file: $GAMEDIR/drive_c/Fallout 3/Fallout_default.ini\r\n    section: Controls\r\n    key: 'bBackground Mouse'\r\n    value: 1\r\n\r\n# Install FOSE and some mods\r\n- extract:\r\n    file: modpack\r\n    dst: $GAMEDIR/drive_c/Fallout 3\r\n- extract:\r\n    file: launchmenu\r\n    dst: $GAMEDIR/drive_c/Fallout 3\r\n\r\n# Large Address Aware patch Fallout3.exe\r\n- extract:\r\n    file: laa-patcher\r\n    dst: $CACHE/laa-patcher\r\n    description: 'Patching Fallout3.exe with Large Address Aware support'\r\n- task:\r\n    name: wineexec\r\n    executable: $CACHE/laa-patcher/EDITBIN.EXE\r\n    args: /LARGEADDRESSAWARE Fallout3.exe\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n    working_dir: $GAMEDIR/drive_c/Fallout 3\r\n    description: 'Patching Fallout3.exe with Large Address Aware support'\r\n\r\n- task:\r\n    name: wineexec\r\n    executable: $GAMEDIR/drive_c/Fallout 3/boss.exe\r\n    args: --update --silent --game Fallout3\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n    description: Sorting modlist with BOSS\r\n\r\n- task:\r\n    name: set_regedit\r\n    description: 'Enabling virtual desktop'\r\n    path: 'HKEY_CURRENT_USER\\Software\\Wine\\Explorer\\Desktops'\r\n    key: WineDesktop\r\n    value: '1280x720'\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n- task:\r\n    name: set_regedit\r\n    description: 'Enabling virtual desktop'\r\n    path: 'HKEY_CURRENT_USER\\Software\\Wine\\Explorer'\r\n    key: Desktop\r\n    value: WineDesktop\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n- task:\r\n    name: winekill\r\n    prefix: $GAMEDIR\r\n\r\n# Some nice-to-have symlinks\r\n- execute:\r\n    command: |\r\n      rm -f \"$GAMEDIR/drive_c/users/$USER/My Documents\"\r\n      mkdir -pv \"$GAMEDIR/drive_c/users/$USER/My Documents/My Games/Fallout3\"\r\n      rm -f \"$GAMEDIR/data\"; ln -svrT \"$GAMEDIR/drive_c/Fallout 3/Data\" \"$GAMEDIR/data\"\r\n      rm -f \"$GAMEDIR/config\"; ln -svrT \"$GAMEDIR/drive_c/users/$USER/My Documents/My Games/Fallout3\" \"$GAMEDIR/config\"\r\n      rm -f \"$GAMEDIR/drive_c/users/$USER/My Documents/My Games/Fallout3/Saves\"\r\n      $INPUT_CONFIG_LOCATION && (mkdir -pv \"$HOME/Documents/My Games/Fallout3/Saves\" \"$GAMEDIR/drive_c/users/$USER/My Documents/My Games/Fallout3\"; ln -svT \"$HOME/Documents/My Games/Fallout3/Saves\" \"$GAMEDIR/drive_c/users/$USER/My Documents/My Games/Fallout3/Saves\")\r\n\r\n# Run launcher to configure the game\r\n- task:\r\n    name: wineexec\r\n    executable: $GAMEDIR/drive_c/Fallout 3/FalloutLauncher.exe\r\n    prefix: $GAMEDIR\r\n    arch: win64\r\n    description: |\r\n      Configure data files (DLCs), video settings and exit the launcher.\r\n      Don't forget to set your native resolution!\r\n    exclude_processes: Fallout3.exe\r\n    env:\r\n      WINEDEBUG: -all\r\n- task:\r\n    name: winekill\r\n    prefix: $GAMEDIR\r\n    arch: win64"
}