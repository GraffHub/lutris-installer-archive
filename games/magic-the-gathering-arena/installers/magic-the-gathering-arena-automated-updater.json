{
  "id": 17311,
  "game_id": 17988,
  "game_slug": "magic-the-gathering-arena",
  "name": "Magic: The Gathering Arena",
  "year": 2017,
  "user": "sessel",
  "runner": "wine",
  "slug": "magic-the-gathering-arena-automated-updater",
  "version": "Automated Updater",
  "description": "Updates existing install with MSP File\r\nCheck https://mtgarena.downloads.wizards.com/Live/Windows32/version first and check if the field \"CurrentPatchURL\" is set correctly. Otherwise you need to use the \"Automated Installer (Latest)\" Version I published before.",
  "notes": "",
  "created_at": "2019-12-13T06:19:07.342425Z",
  "updated_at": "2019-12-13T06:19:07.342452Z",
  "draft": true,
  "published": false,
  "published_by": null,
  "rating": "",
  "steamid": null,
  "gogid": null,
  "gogslug": "",
  "humblestoreid": "",
  "script": {
    "files": [
      {
        "setup": "https://mtgarena.downloads.wizards.com/Live/Windows32/version"
      }
    ],
    "installer": [
      {
        "task": {
          "prefix": "$GAMEDIR",
          "name": "winekill"
        }
      },
      {
        "write_file": {
          "content": "#!/bin/bash \n OUTPUT=$1 \n VERSIONSITE=\"https://mtgarena.downloads.wizards.com/Live/Windows32/version\" \n VERSIONKEY=\"CurrentPatchURL\" \n MSIURL=$(curl $VERSIONSITE | grep $VERSIONKEY | sed -r 's/(\\s*\"[^\\\"]+\":\\s*\")([^\\\"]+)(\",?\\s*)/\\2/g') \n wget $MSIURL -O $OUTPUT \n",
          "file": "$CACHE/download.sh"
        }
      },
      {
        "chmodx": "$CACHE/download.sh"
      },
      {
        "execute": {
          "args": "$CACHE/MTGAPatch.msp",
          "file": "$CACHE/download.sh",
          "description": "Downloading Patch ..."
        }
      },
      {
        "task": {
          "description": "Updating Magic the Gathering Arena ...",
          "name": "wineexec",
          "executable": "msiexec",
          "prefix": "$GAMEDIR",
          "args": "/p \"$CACHE/MTGAPatch.msp\"",
          "exclude_processes": "MTGALauncher.ex MTGALauncher.exe mscorsvw.exe rundll32.exe rpcss.exe powershell.exe MTGA.exe UnityCrashHandler32.exe svchost.exe"
        }
      },
      {
        "task": {
          "prefix": "$GAMEDIR",
          "name": "winekill"
        }
      }
    ],
    "game": {
      "prefix": "$GAMEDIR",
      "arch": "win64",
      "exe": "drive_c/Program Files (x86)/Wizards of the Coast/MTGA/MTGA.exe"
    },
    "system": {
      "pulse_latency": true
    },
    "wine": {
      "version": "lutris-mtga-4.21-x86_64",
      "Desktop": true,
      "esync": true
    }
  },
  "content": "files:\n- setup: https://mtgarena.downloads.wizards.com/Live/Windows32/version\ngame:\n  arch: win64\n  exe: drive_c/Program Files (x86)/Wizards of the Coast/MTGA/MTGA.exe\n  prefix: $GAMEDIR\ninstaller:\n- task:\n    name: winekill\n    prefix: $GAMEDIR\n- write_file:\n    content: \"#!/bin/bash \\n OUTPUT=$1 \\n VERSIONSITE=\\\"https://mtgarena.downloads.wizards.com/Live/Windows32/version\\\"\\\n      \\ \\n VERSIONKEY=\\\"CurrentPatchURL\\\" \\n MSIURL=$(curl $VERSIONSITE | grep $VERSIONKEY\\\n      \\ | sed -r 's/(\\\\s*\\\"[^\\\\\\\"]+\\\":\\\\s*\\\")([^\\\\\\\"]+)(\\\",?\\\\s*)/\\\\2/g') \\n wget\\\n      \\ $MSIURL -O $OUTPUT \\n\"\n    file: $CACHE/download.sh\n- chmodx: $CACHE/download.sh\n- execute:\n    args: $CACHE/MTGAPatch.msp\n    description: Downloading Patch ...\n    file: $CACHE/download.sh\n- task:\n    args: /p \"$CACHE/MTGAPatch.msp\"\n    description: Updating Magic the Gathering Arena ...\n    exclude_processes: MTGALauncher.ex MTGALauncher.exe mscorsvw.exe rundll32.exe\n      rpcss.exe powershell.exe MTGA.exe UnityCrashHandler32.exe svchost.exe\n    executable: msiexec\n    name: wineexec\n    prefix: $GAMEDIR\n- task:\n    name: winekill\n    prefix: $GAMEDIR\nsystem:\n  pulse_latency: true\nwine:\n  Desktop: true\n  esync: true\n  version: lutris-mtga-4.21-x86_64\n"
}