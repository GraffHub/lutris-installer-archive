{
  "id": 21692,
  "game_id": 5489,
  "game_slug": "broken-sword-2-the-smoking-mirror",
  "name": "Broken Sword II: The Smoking Mirror",
  "year": 1997,
  "user": "appoloin",
  "runner": "scummvm",
  "slug": "broken-sword-ii-the-smoking-m-gog-original-game",
  "version": "GOG Original Game",
  "description": "The script installs the original Broken Sword game files from the GOG v2 installers",
  "notes": "",
  "created_at": "2020-06-19T10:31:16.404417Z",
  "updated_at": "2020-06-19T10:31:16.404442Z",
  "draft": false,
  "published": false,
  "published_by": null,
  "rating": "",
  "steamid": null,
  "gogid": null,
  "gogslug": "",
  "humbleid": "brokensword2",
  "humblestoreid": "brokensword2",
  "humblestoreid_real": "",
  "script": {
    "files": [
      {
        "game": "N/A:Select GOG installer."
      },
      {
        "inno": "https://lutris.nyc3.digitaloceanspaces.com/tools/innoextract/innoextract-1.8-dev-2019-01-13-linux.tar.xz"
      }
    ],
    "game": {
      "game_id": "sword2",
      "path": "$GAMEDIR"
    },
    "installer": [
      {
        "write_file": {
          "content": "#!/bin/bash\nsrc=$1\ndst=$2\nfind \"$src\" -maxdepth 1 -type f \\( -iname \"*.dxa\" -o -iname \"*.fla\" \\) -exec cp {} \"$dst\" \\;",
          "file": "$CACHE/selectcopy.sh"
        }
      },
      {
        "chmodx": "$CACHE/selectcopy.sh"
      },
      {
        "write_file": {
          "content": "#!/bin/bash\nsrc=$1\nfind \"$src\" -maxdepth 1 -type d \\( -iname scummvm -o -iname save -o -iname extras \\) -exec rm -r {}  \\;\nfind \"$src\" -maxdepth 1 -type f \\( -iname \"*.dll\" -o -iname \"*.ico\" -o -iname \"*.ini\" \\) -exec rm {}  \\;",
          "file": "$CACHE/remove.sh"
        }
      },
      {
        "chmodx": "$CACHE/remove.sh"
      },
      {
        "extract": {
          "dst": "$CACHE",
          "file": "$inno"
        }
      },
      {
        "execute": {
          "args": "-I app -d \"$CACHE\" \"$game\"",
          "file": "$CACHE/innoextract"
        }
      },
      {
        "merge": {
          "dst": "$GAMEDIR",
          "src": "$CACHE/app"
        }
      },
      {
        "execute": {
          "args": "$GAMEDIR/Extras  $GAMEDIR",
          "file": "$CACHE/selectcopy.sh"
        }
      },
      {
        "execute": {
          "args": "$GAMEDIR",
          "file": "$CACHE/remove.sh"
        }
      }
    ],
    "scummvm": {
      "fullscreen": true
    }
  },
  "content": "files:\n- game: N/A:Select GOG installer.\n- inno: https://lutris.nyc3.digitaloceanspaces.com/tools/innoextract/innoextract-1.8-dev-2019-01-13-linux.tar.xz\ngame:\n  game_id: sword2\n  path: $GAMEDIR\ninstaller:\n- write_file:\n    content: '#!/bin/bash\n\n      src=$1\n\n      dst=$2\n\n      find \"$src\" -maxdepth 1 -type f \\( -iname \"*.dxa\" -o -iname \"*.fla\" \\) -exec\n      cp {} \"$dst\" \\;'\n    file: $CACHE/selectcopy.sh\n- chmodx: $CACHE/selectcopy.sh\n- write_file:\n    content: '#!/bin/bash\n\n      src=$1\n\n      find \"$src\" -maxdepth 1 -type d \\( -iname scummvm -o -iname save -o -iname extras\n      \\) -exec rm -r {}  \\;\n\n      find \"$src\" -maxdepth 1 -type f \\( -iname \"*.dll\" -o -iname \"*.ico\" -o -iname\n      \"*.ini\" \\) -exec rm {}  \\;'\n    file: $CACHE/remove.sh\n- chmodx: $CACHE/remove.sh\n- extract:\n    dst: $CACHE\n    file: $inno\n- execute:\n    args: -I app -d \"$CACHE\" \"$game\"\n    file: $CACHE/innoextract\n- merge:\n    dst: $GAMEDIR\n    src: $CACHE/app\n- execute:\n    args: $GAMEDIR/Extras  $GAMEDIR\n    file: $CACHE/selectcopy.sh\n- execute:\n    args: $GAMEDIR\n    file: $CACHE/remove.sh\nscummvm:\n  fullscreen: true\n"
}