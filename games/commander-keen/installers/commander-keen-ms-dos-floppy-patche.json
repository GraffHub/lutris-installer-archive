{
  "id": 15124,
  "game_id": 4632,
  "game_slug": "commander-keen",
  "name": "Commander Keen",
  "year": 1990,
  "user": "appoloin",
  "runner": "dosbox",
  "slug": "commander-keen-ms-dos-floppy-patche",
  "version": "MS-DOS Floppy - PATCHED",
  "description": "The installer will patch the controls\r\n Space = shoot\r\n Enter = status",
  "notes": "",
  "created_at": "2019-08-24T23:25:50.887335Z",
  "updated_at": "2019-08-24T23:25:50.887357Z",
  "draft": false,
  "published": false,
  "published_by": null,
  "rating": "",
  "steamid": null,
  "gogid": null,
  "gogslug": "",
  "humblestoreid": "",
  "script": {
    "game": {
      "main_file": "$GAMEDIR/commander_keen.conf"
    },
    "files": [
      {
        "game": "N/A:Select the file Keen1.exe"
      },
      {
        "patch": "http://www.shikadi.net/wiki/files/tools/t.ckpatch_v.0.10.andrew_durdin.2007-11-23.zip"
      }
    ],
    "installer": [
      {
        "execute": {
          "args": "$GAMEDIR/HDD $GAMEDIR/HDD/keen1",
          "file": "mkdir"
        }
      },
      {
        "extract": {
          "dst": "$CACHE",
          "format": "zip",
          "file": "$patch"
        }
      },
      {
        "execute": {
          "args": "$CACHE/CK1PATCH.EXE $GAMEDIR/HDD/keen1",
          "file": "/bin/cp"
        }
      },
      {
        "write_file": {
          "content": "%ext ck1\n#Change the controls to Space, shoot; Enter, status.\n%patch $1251 $5048W\n%patch $7FA3 $5048W\n%patch $3B23 $90 $90 $90 $90 $90 $90 $90 $80 $3E $5065W $00\n%patch $3C4E $90 $90 $90 $90 $90 $90 $90 $80 $3E $5065W $00\n%patch $3DB9 $90 $90 $90 $90 $90 $90 $90 $80 $3E $5065W $00\n%patch $3DCC $90 $90\n%patch $3E6D $90 $90 $90 $90 $90 $90 $90 $80 $3E $5065W $00\n%patch $3FFC $90 $90 $90 $90 $90 $90 $90 $80 $3E $5065W $00\n%patch $40AA $90 $90 $90 $90 $90 $90 $90 $80 $3E $5065W $00\n%end",
          "file": "$GAMEDIR/HDD/keen1/PATCH.PAT"
        }
      },
      {
        "write_file": {
          "content": "#!/bin/bash\nsrc=$1\ndst=$2\nsrc_path=$(echo \"$1\" | sed -r \"s/(.+)\\/.+/\\1/\")\ncp -avr \"$src_path/.\"  \"$dst\"",
          "file": "$CACHE/bulkcopy.sh"
        }
      },
      {
        "chmodx": "$CACHE/bulkcopy.sh"
      },
      {
        "execute": {
          "args": "$game $GAMEDIR/HDD/keen1",
          "file": "$CACHE/bulkcopy.sh"
        }
      },
      {
        "write_file": {
          "content": "[cpu]\ncputype=386_slow\n[autoexec]\nmount C \"$GAMEDIR/HDD\" -t dir\nC:\ncd keen1\nCK1PATCH.EXE patch.pat\nexit",
          "file": "$GAMEDIR/commander_keen.conf"
        }
      }
    ]
  },
  "content": "files:\n- game: N/A:Select the file Keen1.exe\n- patch: http://www.shikadi.net/wiki/files/tools/t.ckpatch_v.0.10.andrew_durdin.2007-11-23.zip\ngame:\n  main_file: $GAMEDIR/commander_keen.conf\ninstaller:\n- execute:\n    args: $GAMEDIR/HDD $GAMEDIR/HDD/keen1\n    file: mkdir\n- extract:\n    dst: $CACHE\n    file: $patch\n    format: zip\n- execute:\n    args: $CACHE/CK1PATCH.EXE $GAMEDIR/HDD/keen1\n    file: /bin/cp\n- write_file:\n    content: '%ext ck1\n\n      #Change the controls to Space, shoot; Enter, status.\n\n      %patch $1251 $5048W\n\n      %patch $7FA3 $5048W\n\n      %patch $3B23 $90 $90 $90 $90 $90 $90 $90 $80 $3E $5065W $00\n\n      %patch $3C4E $90 $90 $90 $90 $90 $90 $90 $80 $3E $5065W $00\n\n      %patch $3DB9 $90 $90 $90 $90 $90 $90 $90 $80 $3E $5065W $00\n\n      %patch $3DCC $90 $90\n\n      %patch $3E6D $90 $90 $90 $90 $90 $90 $90 $80 $3E $5065W $00\n\n      %patch $3FFC $90 $90 $90 $90 $90 $90 $90 $80 $3E $5065W $00\n\n      %patch $40AA $90 $90 $90 $90 $90 $90 $90 $80 $3E $5065W $00\n\n      %end'\n    file: $GAMEDIR/HDD/keen1/PATCH.PAT\n- write_file:\n    content: '#!/bin/bash\n\n      src=$1\n\n      dst=$2\n\n      src_path=$(echo \"$1\" | sed -r \"s/(.+)\\/.+/\\1/\")\n\n      cp -avr \"$src_path/.\"  \"$dst\"'\n    file: $CACHE/bulkcopy.sh\n- chmodx: $CACHE/bulkcopy.sh\n- execute:\n    args: $game $GAMEDIR/HDD/keen1\n    file: $CACHE/bulkcopy.sh\n- write_file:\n    content: '[cpu]\n\n      cputype=386_slow\n\n      [autoexec]\n\n      mount C \"$GAMEDIR/HDD\" -t dir\n\n      C:\n\n      cd keen1\n\n      CK1PATCH.EXE patch.pat\n\n      exit'\n    file: $GAMEDIR/commander_keen.conf\n"
}