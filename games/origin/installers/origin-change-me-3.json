{
  "id": 14970,
  "game_id": 11513,
  "game_slug": "origin",
  "name": "Origin",
  "year": 2011,
  "user": "citrusalex",
  "runner": "wine",
  "slug": "origin-change-me-3",
  "version": "Change Me",
  "description": "Installs the latest version of Origin with DXVK",
  "notes": "Please read before installing: <a href=\"https://github.com/lutris/lutris/wiki/Game:-Origin\">https://github.com/lutris/lutris/wiki/Game:-Origin</a>\r\n\r\nAfter  Origin is installed, launch it and wait until Origin Updater gives you an error. Without closing it, click \"Kill all wine processes\" in the Lutris window. Then launch it again.\r\nOrigin should update again, and this time successfully.",
  "created_at": "2019-08-11T15:47:43.336212Z",
  "updated_at": "2019-08-11T15:47:43.336250Z",
  "draft": false,
  "published": false,
  "published_by": 51687,
  "rating": "",
  "steamid": null,
  "gogid": null,
  "gogslug": "",
  "humblestoreid": "",
  "script": {
    "system": {
      "exclude_processes": "QtWebEngineProcess.exe ActivationUI.exe OriginWebHelperService.exe",
      "env": {
        "__GL_SHADER_DISK_CACHE": 1,
        "DXVK_CONFIG_FILE": "$GAMEDIR/dxvk.conf",
        "__GL_SHADER_DISK_CACHE_PATH": "$GAMEDIR/nv-shaders",
        "DXVK_HUD": 0,
        "STAGING_SHARED_MEMORY": 0
      }
    },
    "game": {
      "arch": "win64",
      "prefix": "$GAMEDIR",
      "exe": "drive_c/Program Files (x86)/Origin/Origin.exe"
    },
    "wine": {
      "overrides": {
        "xaudio2_7": "native,builtin",
        "nvapi,nvapi64": "disabled"
      },
      "dxvk": true,
      "version": "tkg-4.0-x86_64"
    },
    "files": [
      {
        "client": "https://download.dm.origin.com/origin/live/OriginSetup.exe"
      },
      {
        "updater": "https://raw.githubusercontent.com/DrDoctor13/wine-origin-updater/master/updateorigin.sh"
      }
    ],
    "installer": [
      {
        "input_menu": {
          "preselect": "#Not needed for AMD. Ignore this.",
          "id": "GPU",
          "description": "Setting DXVK workarounds please choose your GPU:",
          "options": [
            {
              "#Not needed for AMD. Ignore this.": "AMD"
            },
            {
              "dxgi.nvapiHack = False\nd3d11.zeroInitWorkgroupMemory = True": "Nvidia"
            }
          ]
        }
      },
      {
        "task": {
          "arch": "win64",
          "prefix": "$GAMEDIR",
          "description": "Creating Wine prefix",
          "name": "create_prefix"
        }
      },
      {
        "execute": {
          "command": "mkdir \"$GAMEDIR/nv-shaders\""
        }
      },
      {
        "write_file": {
          "content": "$INPUT_GPU",
          "file": "$GAMEDIR/dxvk.conf"
        }
      },
      {
        "task": {
          "arch": "win64",
          "prefix": "$GAMEDIR",
          "name": "winetricks",
          "app": "nocrashdialog win7 arial"
        }
      },
      {
        "task": {
          "prefix": "$GAMEDIR",
          "executable": "client",
          "description": "Installing Origin... Login window will pop-up and close.",
          "args": "/silent",
          "arch": "win64",
          "exclude_processes": "Origin.exe OriginClientService.exe OriginWebHelperService.exe QtWebEngineProcess.exe",
          "name": "wineexec"
        }
      },
      {
        "task": {
          "prefix": "$GAMEDIR",
          "name": "winekill"
        }
      },
      {
        "task": {
          "prefix": "$GAMEDIR",
          "name": "winekill"
        }
      },
      {
        "chmodx": "updater"
      },
      {
        "merge": {
          "dst": "$GAMEDIR/drive_c/Program Files (x86)/Origin",
          "src": "updater"
        }
      },
      {
        "execute": {
          "env": {
            "WINEPREFIX": "$GAMEDIR"
          },
          "file": "$GAMEDIR/drive_c/Program Files (x86)/Origin/updateorigin.sh"
        }
      },
      {
        "task": {
          "prefix": "$GAMEDIR",
          "name": "winekill"
        }
      }
    ]
  },
  "content": "files:\n- client: https://download.dm.origin.com/origin/live/OriginSetup.exe\n- updater: https://raw.githubusercontent.com/DrDoctor13/wine-origin-updater/master/updateorigin.sh\ngame:\n  arch: win64\n  exe: drive_c/Program Files (x86)/Origin/Origin.exe\n  prefix: $GAMEDIR\ninstaller:\n- input_menu:\n    description: 'Setting DXVK workarounds please choose your GPU:'\n    id: GPU\n    options:\n    - '#Not needed for AMD. Ignore this.': AMD\n    - ? 'dxgi.nvapiHack = False\n\n        d3d11.zeroInitWorkgroupMemory = True'\n      : Nvidia\n    preselect: '#Not needed for AMD. Ignore this.'\n- task:\n    arch: win64\n    description: Creating Wine prefix\n    name: create_prefix\n    prefix: $GAMEDIR\n- execute:\n    command: mkdir \"$GAMEDIR/nv-shaders\"\n- write_file:\n    content: $INPUT_GPU\n    file: $GAMEDIR/dxvk.conf\n- task:\n    app: nocrashdialog win7 arial\n    arch: win64\n    name: winetricks\n    prefix: $GAMEDIR\n- task:\n    arch: win64\n    args: /silent\n    description: Installing Origin... Login window will pop-up and close.\n    exclude_processes: Origin.exe OriginClientService.exe OriginWebHelperService.exe\n      QtWebEngineProcess.exe\n    executable: client\n    name: wineexec\n    prefix: $GAMEDIR\n- task:\n    name: winekill\n    prefix: $GAMEDIR\n- task:\n    name: winekill\n    prefix: $GAMEDIR\n- chmodx: updater\n- merge:\n    dst: $GAMEDIR/drive_c/Program Files (x86)/Origin\n    src: updater\n- execute:\n    env:\n      WINEPREFIX: $GAMEDIR\n    file: $GAMEDIR/drive_c/Program Files (x86)/Origin/updateorigin.sh\n- task:\n    name: winekill\n    prefix: $GAMEDIR\nsystem:\n  env:\n    DXVK_CONFIG_FILE: $GAMEDIR/dxvk.conf\n    DXVK_HUD: 0\n    STAGING_SHARED_MEMORY: 0\n    __GL_SHADER_DISK_CACHE: 1\n    __GL_SHADER_DISK_CACHE_PATH: $GAMEDIR/nv-shaders\n  exclude_processes: QtWebEngineProcess.exe ActivationUI.exe OriginWebHelperService.exe\nwine:\n  dxvk: true\n  overrides:\n    nvapi,nvapi64: disabled\n    xaudio2_7: native,builtin\n  version: tkg-4.0-x86_64\n"
}