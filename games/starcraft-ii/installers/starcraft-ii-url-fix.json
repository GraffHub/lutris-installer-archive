{
  "id": 16496,
  "game_id": 3367,
  "game_slug": "starcraft-ii",
  "name": "StarCraft II",
  "year": 2010,
  "user": "williamluke4",
  "runner": "wine",
  "slug": "starcraft-ii-url-fix",
  "version": "URL Fix",
  "description": "Starcraft II - DX9 to OpenGL - 64 bit - Esync",
  "notes": "**IMPORTANT: INSTALL THE DEPENDENCIES FIRST**\r\nSee https://github.com/lutris/lutris/wiki/Game:-Blizzard-App\r\n\r\n**NOTES**\r\n- \"Displaymode 1\" is set in Blizzard App for Fullscreen Windowed\r\n- Use Esync 3.15 wine build to take advantage of working PBA.",
  "created_at": "2019-10-30T16:14:40.058175Z",
  "updated_at": "2019-10-30T16:14:40.058198Z",
  "draft": true,
  "published": false,
  "published_by": null,
  "rating": "",
  "steamid": null,
  "gogid": null,
  "gogslug": "",
  "humblestoreid": "",
  "script": {
    "script": {
      "files": [
        {
          "setup": {
            "filename": "Battle.net-Setup.exe",
            "url": "https://www.battle.net/download/getInstallerForGame?os=win&locale=enUS&version=LIVE&gameProgram=BATTLENET_APP"
          }
        },
        {
          "d3dcompiler47": "https://lutris.net/files/tools/dll/d3dcompiler_47.dll"
        }
      ],
      "exe": "drive_c/Program Files (x86)/Battle.net/Battle.net Launcher.exe",
      "installer": [
        {
          "task": {
            "description": "Creating 64bit Wine prefix.",
            "name": "create_prefix",
            "arch": "win64",
            "prefix": "$GAMEDIR"
          }
        },
        {
          "task": {
            "description": "Installing Arial font",
            "name": "winetricks",
            "arch": "win64",
            "app": "arial",
            "prefix": "$GAMEDIR"
          }
        },
        {
          "task": {
            "description": "Install d3dcompiler_43 with winetricks",
            "name": "winetricks",
            "arch": "win64",
            "app": "d3dcompiler_43",
            "prefix": "$GAMEDIR"
          }
        },
        {
          "move": {
            "dst": "$GAMEDIR/drive_c/windows/system32/d3dcompiler_47.dll.ORIG",
            "src": "$GAMEDIR/drive_c/windows/system32/d3dcompiler_47.dll"
          }
        },
        {
          "merge": {
            "dst": "$GAMEDIR/drive_c/windows/system32",
            "src": "d3dcompiler47"
          }
        },
        {
          "task": {
            "description": "Setting Windows 10 mode for Wine",
            "name": "set_regedit",
            "arch": "win64",
            "key": "Version",
            "prefix": "$GAMEDIR",
            "path": "HKEY_CURRENT_USER\\Software\\Wine",
            "value": "win10"
          }
        },
        {
          "write_json": {
            "Client": {
              "StreamingEnabled": "false",
              "HardwareAcceleration": "false",
              "Sound": null,
              "Streaming": null,
              "Enabled": "false",
              "GameLaunchWindowBehavior": "2"
            },
            "Games": {
              "AdditionalLaunchArguments": "-Displaymode 1",
              "s2": null
            },
            "data": null,
            "file": "$GAMEDIR/drive_c/users/$USER/Application Data/Battle.net/Battle.net.config",
            "description": "Disabling Sound/Hardware Acceleration/Streaming in Blizzard App"
          }
        },
        {
          "task": {
            "description": "Installing Blizzard App",
            "name": "wineexec",
            "arch": "win64",
            "exclude_processes": "Battle.net.exe Agent.exe \"Battle.net Helper.exe\"",
            "executable": "setup"
          }
        },
        {
          "task": {
            "prefix": "$GAMEDIR",
            "name": "winekill"
          }
        },
        {
          "task": {
            "description": "Wine Staging: Enabling DXVA2",
            "name": "set_regedit",
            "arch": "win64",
            "key": "backend",
            "prefix": "$GAMEDIR",
            "path": "HKEY_CURRENT_USER\\Software\\Wine\\DXVA2",
            "value": "va"
          }
        }
      ],
      "prefix": "$GAMEDIR",
      "game": null,
      "arch": "win64",
      "system": null,
      "exclude_processes": "Agent.exe \"Battle.net Helper.exe\"",
      "env": {
        "__GL_SHADER_DISK_CACHE_PATH": "$GAMEDIR",
        "__GL_SHADER_DISK_CACHE": 1
      },
      "wine": {
        "version": "ge-protonified-nofshack-4.9-x86_64",
        "esync": true
      }
    }
  },
  "content": "script:\n  arch: win64\n  env:\n    __GL_SHADER_DISK_CACHE: 1\n    __GL_SHADER_DISK_CACHE_PATH: $GAMEDIR\n  exclude_processes: Agent.exe \"Battle.net Helper.exe\"\n  exe: drive_c/Program Files (x86)/Battle.net/Battle.net Launcher.exe\n  files:\n  - setup:\n      filename: Battle.net-Setup.exe\n      url: https://www.battle.net/download/getInstallerForGame?os=win&locale=enUS&version=LIVE&gameProgram=BATTLENET_APP\n  - d3dcompiler47: https://lutris.net/files/tools/dll/d3dcompiler_47.dll\n  game: null\n  installer:\n  - task:\n      arch: win64\n      description: Creating 64bit Wine prefix.\n      name: create_prefix\n      prefix: $GAMEDIR\n  - task:\n      app: arial\n      arch: win64\n      description: Installing Arial font\n      name: winetricks\n      prefix: $GAMEDIR\n  - task:\n      app: d3dcompiler_43\n      arch: win64\n      description: Install d3dcompiler_43 with winetricks\n      name: winetricks\n      prefix: $GAMEDIR\n  - move:\n      dst: $GAMEDIR/drive_c/windows/system32/d3dcompiler_47.dll.ORIG\n      src: $GAMEDIR/drive_c/windows/system32/d3dcompiler_47.dll\n  - merge:\n      dst: $GAMEDIR/drive_c/windows/system32\n      src: d3dcompiler47\n  - task:\n      arch: win64\n      description: Setting Windows 10 mode for Wine\n      key: Version\n      name: set_regedit\n      path: HKEY_CURRENT_USER\\Software\\Wine\n      prefix: $GAMEDIR\n      value: win10\n  - write_json:\n      Client:\n        Enabled: 'false'\n        GameLaunchWindowBehavior: '2'\n        HardwareAcceleration: 'false'\n        Sound: null\n        Streaming: null\n        StreamingEnabled: 'false'\n      Games:\n        AdditionalLaunchArguments: -Displaymode 1\n        s2: null\n      data: null\n      description: Disabling Sound/Hardware Acceleration/Streaming in Blizzard App\n      file: $GAMEDIR/drive_c/users/$USER/Application Data/Battle.net/Battle.net.config\n  - task:\n      arch: win64\n      description: Installing Blizzard App\n      exclude_processes: Battle.net.exe Agent.exe \"Battle.net Helper.exe\"\n      executable: setup\n      name: wineexec\n  - task:\n      name: winekill\n      prefix: $GAMEDIR\n  - task:\n      arch: win64\n      description: 'Wine Staging: Enabling DXVA2'\n      key: backend\n      name: set_regedit\n      path: HKEY_CURRENT_USER\\Software\\Wine\\DXVA2\n      prefix: $GAMEDIR\n      value: va\n  prefix: $GAMEDIR\n  system: null\n  wine:\n    esync: true\n    version: ge-protonified-nofshack-4.9-x86_64\n"
}